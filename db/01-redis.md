# 레디스

## 개념

### 레디스는 인메모리 데이터 저장소이다.

* Redis(Remote Dictionary Server)는 고속 데이터 처리를 위해 사용되는 인메모리 데이터 저장소이다.
* 일반적인 관계형 데이터베이스와 달리, 데이터를 디스크가 아닌 메모리에 저장하여 읽기/쓰기의 속도가 매우 빠르다.
  * 데이터베이스의 부하를 줄이고 응답속도를 높이기 위한 캐싱 솔루션으로 많이 사용된다.
  * 예를 들어, 자주 조회되는 데이터를 Redis에 저장해두면 애플리케이션이 데이터베이스를 매번 조회할 필요없이 즉시 가져올 수 있어 성능이 크게 향상된다.

### 레디스는 영속성 기능을 제공한다.

* 영속성 옵션을 제공하여, 단순한 캐시 역할 뿐만 아니라 데이터 저장소로도 활용할 수 있다.
* RDB(Redis Database)
  * 일정 시간마다 전체 데이터를 스냅샷으로 저장
  * 빠르게 복구 가능하지만, 마지막 저장 이후 변경된 데이터는 손실될 수 있음
* AOF(Append-Only File)
  * 모든 쓰기 명령을 로그에 기록하여 복구 가능
  * RDB 보다 복구 시간이 길지만, 데이터 손실이 거의 없음

### 레디스는 싱글 쓰레드이다.

* 1번에 1개의 명령어만 실행할 수 있어 한 서비스에서 요청된 명령어에 대한 작업이 끝나기 전까진 다른 서비스에서 요청하는 명령은 못 받아들인다.
* keys, flushall 명령어는 절대 사용하지 않도록 유의하자
  * 싱글 스레드이기 때문에, 모든 키를 다 가져오고, 모든 키를 삭제하는 명령어\[O(N)]가 모두 실행되기 전까지 다른 요청에 대한 작업을 진행하지 못한다.
* 즉, Redis는 빠른 속도, 다양한 자료구조, 영속성 기능을 갖춘 고성능 데이터 저장소로 실시간 데이터 처리가 중요한 서비스 (소셜 네트워크, 실시간 채팅, 게임 순위 시스템) 등에서 널리 사용되고 있다.

### 레디스는 확장성이 뛰어나다.

* 데이터 양이 많아지거나, 트래픽이 급격히 증가하는 경우에 수평적 확장을 통해 성능을 최적화할 수 있다.
* Master-Slave Replication
  * 데이터 읽기 부하 분산을 위해 사용됨
  * Master: 데이터를 기록하는 주요 서버
  * Slave: 마스터 데이터를 복제하여 읽기 작업을 처리하는 보조 서버
  * Replication은 비동기적으로 동작하여 일부 데이터 손실 가능성 존재
* Redis Sentinel
  * 고가용성을 위해 Redis Sentinel을 활용할 수 있음
  * Master-Slave Replication을 관리하는 시스템
  * 클러스터의 상태를 모니터링하고, 장애 발생 시 자동 장애 복구 기능을 수행한다.
  * 마스터 노드에 장애가 발생하면, 센티널은 슬레이브 중 하나를 새로운 마스터로 선출한다. (Failover)
* Redis Cluster
  * Cluster Node: 데이터를 저장하고 처리하는 개별 Redis 인스턴스이다.
  * Slot: 데이터를 균등하게 분배하기 위해 전체 데이터베이스가 일정 개수의 슬롯으로 나뉜다.
  * 클러스터는 자동으로 데이터를 다중 노드에 분산하여 저장한다.
  * Sharding: 데이터를 여러노드로 분산하여 처리량 및 용량을 확장할 수 있다.
